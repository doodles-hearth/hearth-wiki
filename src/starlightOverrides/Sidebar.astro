---
import Default from '@astrojs/starlight/components/Sidebar.astro';
---

<Default {...Astro.props} />

<script>
  // Replace onClick with onMouseDown for sidebar links and add prefetch on hover
  document.addEventListener('astro:page-load', () => {
    const sidebar = document.querySelector('.sidebar');
    if (!sidebar) return;

    const links = sidebar.querySelectorAll('a');

    links.forEach(link => {
      const href = link.getAttribute('href');
      if (href && !href.startsWith('http')) {
        link.setAttribute('data-astro-prefetch', 'hover');

        link.addEventListener('pointerdown', e => {
          // Prevent default and handle navigation on mousedown
          if (e.button === 0) {
            // Left click only
            e.preventDefault();
            window.location.href = href;
          }
        });
      }
    });
  });
</script>
